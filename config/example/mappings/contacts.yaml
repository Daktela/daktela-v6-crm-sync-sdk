entity: contact
lookup_field: email
mappings:
  - source: title
    target: full_name
    direction: crm_to_cc

  - source: email
    target: email
    direction: crm_to_cc

  - source: number
    target: phone
    direction: crm_to_cc
    transformers:
      - name: phone_normalize
        params: { format: e164 }

  # Resolve CRM company_id â†’ Daktela account name
  # The engine looks up the CRM account by "id" (resolve_from)
  # and uses its mapped "name" (resolve_to) as the Daktela value
  - source: account
    target: company_id
    direction: crm_to_cc
    relation:
      entity: account
      resolve_from: id
      resolve_to: name

  - source: description
    target: notes
    direction: bidirectional

  # Multi-value custom field: Daktela stores tags as an array,
  # CRM stores them as comma-separated string
  - source: customFields.tags
    target: tags
    direction: crm_to_cc
    multi_value:
      strategy: split
      separator: ","

  # Multi-value custom field: join Daktela array into CRM string
  - source: customFields.interests
    target: interests
    direction: cc_to_crm
    multi_value:
      strategy: join
      separator: ", "
